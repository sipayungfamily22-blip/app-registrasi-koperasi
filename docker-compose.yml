version: "3.8"

networks:
  koperasi_network:
    driver: bridge

services:
  sqlite_web:
    image: coleifer/sqlite-web
    container_name: koperasi_sqlite_web
    restart: unless-stopped
    ports:
      - "8081:8080"
    volumes:
      - ./koperasi:/data
    command: sqlite_web /data/koperasi.db --host 0.0.0.0
    networks:
      - koperasi_network

  app:
    build: .
    container_name: koperasi_app
    restart: unless-stopped
    environment:
      DATABASE_TYPE: sqlite
      DB_PATH: /app/koperasi/koperasi.db
      FLASK_ENV: production
      FLASK_DEBUG: 0
    ports:
      - "8000:8000"
    volumes:
      - ./koperasi:/app/koperasi
      - ./static:/app/static
      - ./logs:/app/logs
    networks:
      - koperasi_network
